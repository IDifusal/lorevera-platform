import{U as b}from"./UploadImage-DavXMRrx.js";import{s as r,o as L,a as f,b as h,i as n,d as l,w as o,n as u,C as M,G as C,F as $,e as _,D as q,p as s,t as y,y as V,H as D,j as U,k as P}from"./app-BzRu1lno.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={flex:""},z=n("h2",null,"List Equipment",-1),G=["src"],J={class:"form-group"},K=n("label",{for:"quantity"},"Name:",-1),O=n("label",{for:"quantity"},"Image:",-1),Q={class:"form-group"},W=n("label",{for:"quantity"},"Name:",-1),X=n("label",{for:"quantity"},"Image:",-1),Y=["src"],Z=n("path",{fill:"red",d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6z"},null,-1),ee=[Z],ne={__name:"ListEquipment",setup(te){const c=r(!1),p=r(!1),m=r(null),g=r({}),i=r({}),d=r({dialog:!1,itemid:null}),E=r([{title:"id",value:"id"},{title:"Name",align:"start",sortable:!1,value:"name"},{title:"Featured Image",value:"created_at"},{title:"Actions",value:"actions",sortable:!1}]),F=t=>{console.log("delete item",t),d.value.dialog=!0,d.value.itemid=t},x=t=>`${`${window.location.protocol}//${window.location.host}`}/storage/${t}`,v=r([]),k=t=>{m.value=t[0]},I=()=>{m.value=null},N=t=>{i.value={...t},p.value=!0},B=()=>{c.value=!0},A=async()=>{try{const t=new FormData;t.append("name",g.value.name),t.append("image",m.value);const{data:e}=await _.post("/api/web/store-equipment",t);v.value.push(e.equipment),c.value=!1,g.value={}}catch(t){console.error(t)}},T=async()=>{const t=d.value.itemid;try{await _.delete(`/api/web/delete-equipment/${t}`),v.value=v.value.filter(e=>e.id!==t)}catch(e){console.error(e)}d.value.dialog=!1,d.value.itemid=null},S=()=>{i.value.imageRemoved=!0,i.value.featured_image_url=null},j=async()=>{try{const t=new FormData;t.append("name",i.value.name),i.value.imageRemoved&&!m.value?(console.log("remove image"),t.append("remove_image","true")):(console.log("not remove image"),t.append("remove_image","false"),m.value?t.append("image",m.value):t.append("image",i.value.featured_image_url));const{data:e}=await _.post(`/api/web/update-equipment/${i.value.id}`,t),a=v.value.findIndex(w=>w.id===i.value.id);v.value[a]=e.equipment,p.value=!1,m.value=null,i.value={}}catch(t){console.error(t)}},H=async()=>{try{const{data:t}=await _.get("/api/web/list-equipment");v.value=t}catch(t){console.error(t)}};return L(async()=>{await H()}),(t,e)=>(f(),h($,null,[n("div",R,[z,l(q),l(u,{color:"primary",onClick:e[0]||(e[0]=a=>B())},{default:o(()=>[s("Add")]),_:1})]),l(M,{headers:E.value,items:v.value,"items-per-page":100,class:"elevation-1 pt-5"},{item:o(a=>[n("tr",null,[n("td",null,y(a.item.id),1),n("td",null,y(a.item.name),1),n("td",null,[n("img",{style:{width:"80px",height:"80px","object-fit":"contain"},src:x(a.item.featured_image_url),alt:""},null,8,G)]),n("td",null,[l(u,{color:"primary",text:"",onClick:w=>N(a.item)},{default:o(()=>[s(" Edit ")]),_:2},1032,["onClick"]),l(u,{color:"error",text:"",onClick:w=>F(a.item.id)},{default:o(()=>[s(" Delete ")]),_:2},1032,["onClick"])])])]),_:1},8,["headers","items"]),l(C,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=a=>c.value=a),persistent:"",width:"500px"},{default:o(()=>[l(V,{class:"text-center pa-10"},{default:o(()=>[l(D,null,{default:o(()=>[s("Creating new Item")]),_:1}),n("div",J,[K,l(U,{modelValue:g.value.name,"onUpdate:modelValue":e[1]||(e[1]=a=>g.value.name=a),"hide-details":"","single-line":""},null,8,["modelValue"]),O,l(b,{onCleanImg:I,onChanged:k})])]),_:1}),l(u,{color:"harper",onClick:e[2]||(e[2]=a=>A())},{default:o(()=>[s("Save Changes")]),_:1}),l(u,{color:"primary",block:"",onClick:e[3]||(e[3]=a=>c.value=!1)},{default:o(()=>[s("Close Dialog")]),_:1})]),_:1},8,["modelValue"]),l(C,{modelValue:p.value,"onUpdate:modelValue":e[9]||(e[9]=a=>p.value=a),persistent:"",width:"500px"},{default:o(()=>[l(V,{class:"text-center pa-10"},{default:o(()=>[l(D,null,{default:o(()=>[s(" Editting Item "+y(i.value.name),1)]),_:1}),n("div",Q,[W,l(U,{modelValue:i.value.name,"onUpdate:modelValue":e[5]||(e[5]=a=>i.value.name=a),"hide-details":"","single-line":"",type:"text"},null,8,["modelValue"]),X,i.value.featured_image_url?(f(),h($,{key:0},[n("img",{style:{width:"80px",height:"80px","object-fit":"contain"},src:x(i.value.featured_image_url),alt:""},null,8,Y),(f(),h("svg",{onClick:e[6]||(e[6]=a=>S()),xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},ee))],64)):(f(),P(b,{key:1,onCleanImg:I,onChanged:k,max:1}))])]),_:1}),l(u,{color:"harper",onClick:e[7]||(e[7]=a=>j())},{default:o(()=>[s("Save Changes")]),_:1}),l(u,{color:"primary",block:"",onClick:e[8]||(e[8]=a=>p.value=!1)},{default:o(()=>[s("Close Dialog")]),_:1})]),_:1},8,["modelValue"]),l(C,{modelValue:d.value.dialog,"onUpdate:modelValue":e[12]||(e[12]=a=>d.value.dialog=a),"max-width":"400",persistent:""},{default:o(()=>[l(V,{text:"Are you sure you want to delete this item?",title:"This will delete the item permanently."},{actions:o(()=>[l(q),l(u,{onClick:e[10]||(e[10]=a=>d.value.dialog=!1)},{default:o(()=>[s(" Cancel ")]),_:1}),l(u,{color:"lorevera",onClick:e[11]||(e[11]=a=>T())},{default:o(()=>[s(" Confirm ")]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{ne as default};
