import{U as V}from"./UploadImage-Dj-8oBTU.js";import{s as u,o as T,a as g,b as h,i as o,d as l,w as n,n as d,C as j,G as b,F as k,e as f,D as H,p as s,t as w,y as I,H as $,j as q,k as L}from"./app-B99oOmj4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={flex:""},P=o("h2",null,"List Equipment",-1),z=["src"],G={class:"form-group"},J=o("label",{for:"quantity"},"Name:",-1),K=o("label",{for:"quantity"},"Image:",-1),O={class:"form-group"},Q=o("label",{for:"quantity"},"Name:",-1),R=o("label",{for:"quantity"},"Image:",-1),W=["src"],X=o("path",{fill:"red",d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6z"},null,-1),Y=[X],le={__name:"ListEquipment",setup(Z){const c=u(!1),v=u(!1),m=u(null),p=u({}),i=u({}),D=u([{title:"id",value:"id"},{title:"Name",align:"start",sortable:!1,value:"name"},{title:"Featured Image",value:"created_at"},{title:"Actions",value:"actions",sortable:!1}]),y=t=>`${`${window.location.protocol}//${window.location.host}`}/storage/${t}`,r=u([]),C=t=>{m.value=t[0]},x=()=>{m.value=null},U=t=>{i.value={...t},v.value=!0},E=()=>{c.value=!0},F=async()=>{try{const t=new FormData;t.append("name",p.value.name),t.append("image",m.value);const{data:e}=await f.post("/api/web/store-equipment",t);r.value.push(e.equipment),c.value=!1,p.value={}}catch(t){console.error(t)}},N=async t=>{try{await f.delete(`/api/web/delete-equipment/${t}`),r.value=r.value.filter(e=>e.id!==t)}catch(e){console.error(e)}},B=()=>{i.value.featured_image_url=null},A=async()=>{try{const t=new FormData;t.append("name",i.value.name),!i.value.featured_image_url&&!m.value?t.append("remove_image","true"):(t.append("remove_image","false"),t.append("image",m.value));const{data:e}=await f.post(`/api/web/update-equipment/${i.value.id}`,t),a=r.value.findIndex(_=>_.id===i.value.id);r.value[a]=e.equipment,v.value=!1,m.value=null,i.value={}}catch(t){console.error(t)}},S=async()=>{try{const{data:t}=await f.get("/api/web/list-equipment");r.value=t}catch(t){console.error(t)}};return T(async()=>{await S()}),(t,e)=>(g(),h(k,null,[o("div",M,[P,l(H),l(d,{color:"primary",onClick:e[0]||(e[0]=a=>E())},{default:n(()=>[s("Add")]),_:1})]),l(j,{headers:D.value,items:r.value,"items-per-page":100,class:"elevation-1 pt-5"},{item:n(a=>[o("tr",null,[o("td",null,w(a.item.id),1),o("td",null,w(a.item.name),1),o("td",null,[o("img",{style:{width:"80px",height:"80px","object-fit":"contain"},src:y(a.item.featured_image_url),alt:""},null,8,z)]),o("td",null,[l(d,{color:"primary",text:"",onClick:_=>U(a.item)},{default:n(()=>[s(" Edit ")]),_:2},1032,["onClick"]),l(d,{color:"error",text:"",onClick:_=>N(a.item.id)},{default:n(()=>[s(" Delete ")]),_:2},1032,["onClick"])])])]),_:1},8,["headers","items"]),l(b,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=a=>c.value=a),persistent:"",width:"500px"},{default:n(()=>[l(I,{class:"text-center pa-10"},{default:n(()=>[l($,null,{default:n(()=>[s("Creating new Item")]),_:1}),o("div",G,[J,l(q,{modelValue:p.value.name,"onUpdate:modelValue":e[1]||(e[1]=a=>p.value.name=a),"hide-details":"","single-line":""},null,8,["modelValue"]),K,l(V,{onCleanImg:x,onChanged:C})])]),_:1}),l(d,{color:"harper",onClick:e[2]||(e[2]=a=>F())},{default:n(()=>[s("Save Changes")]),_:1}),l(d,{color:"primary",block:"",onClick:e[3]||(e[3]=a=>c.value=!1)},{default:n(()=>[s("Close Dialog")]),_:1})]),_:1},8,["modelValue"]),l(b,{modelValue:v.value,"onUpdate:modelValue":e[9]||(e[9]=a=>v.value=a),persistent:"",width:"500px"},{default:n(()=>[l(I,{class:"text-center pa-10"},{default:n(()=>[l($,null,{default:n(()=>[s(" Editting Item "+w(i.value.name),1)]),_:1}),o("div",O,[Q,l(q,{modelValue:i.value.name,"onUpdate:modelValue":e[5]||(e[5]=a=>i.value.name=a),"hide-details":"","single-line":"",type:"text"},null,8,["modelValue"]),R,i.value.featured_image_url?(g(),h(k,{key:0},[o("img",{style:{width:"80px",height:"80px","object-fit":"contain"},src:y(i.value.featured_image_url),alt:""},null,8,W),(g(),h("svg",{onClick:e[6]||(e[6]=a=>B()),xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},Y))],64)):(g(),L(V,{key:1,onCleanImg:x,onChanged:C,max:1}))])]),_:1}),l(d,{color:"harper",onClick:e[7]||(e[7]=a=>A())},{default:n(()=>[s("Save Changes")]),_:1}),l(d,{color:"primary",block:"",onClick:e[8]||(e[8]=a=>v.value=!1)},{default:n(()=>[s("Close Dialog")]),_:1})]),_:1},8,["modelValue"])],64))}};export{le as default};
