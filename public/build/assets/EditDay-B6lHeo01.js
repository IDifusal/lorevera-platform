import{u as k,S,E}from"./index-CWzamQ59.js";import{s as l,o as C,a as N,b as T,p as y,d as o,j as W,G as h,i as s,w as n,v as $,n as D,x as m,I as p,f as I}from"./app-B8AjFgFC.js";const B=s("label",{for:"name"},"Title:",-1),L=s("label",{for:"quantity"},"Description:",-1),O=s("label",{for:"quantity"},"Image:",-1),J=["src"],R=s("label",{for:""},"Select Equipment",-1),j=s("label",{for:""},"Select Warm Up",-1),F=s("label",{for:""},"Select Workouts",-1),K={__name:"EditDay",setup(M){const v=l([]),w=l([]),f=l([]),g=I(),c=k({content:"",extensions:[S]}),i=l({}),r=l([]),u=l([]),d=l([]),V=async()=>{try{const{data:t}=await axios.get("/api/web/list-equipment");for(let e=0;e<t.length;e++)t[e].title=t[e].name;v.value=t}catch(t){console.error(t)}},_=t=>`${`${window.location.protocol}//${window.location.host}`}/storage/${t}`,b=async()=>{try{const{data:t}=await axios.get("/api/web/list-warmup");for(let e=0;e<t.length;e++)t[e].title=t[e].name;w.value=t}catch(t){console.error(t)}},x=async()=>{try{const{data:t}=await axios.get("/api/web/list-workout");for(let e=0;e<t.length;e++)t[e].title=t[e].name;f.value=t}catch(t){console.error(t)}},q=async()=>{if(!i.value.title){alert("Title is required");return}const t=new FormData;t.append("title",i.value.title),t.append("content",c.value.getHTML()),t.append("equipment",JSON.stringify(r.value)),t.append("warmUp",JSON.stringify(u.value)),t.append("workout",JSON.stringify(d.value));try{const e=window.location.pathname.split("/").pop(),a=await axios.post(`/api/web/update-day/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}});g.push({name:"days"})}catch(e){console.error(e)}},U=async()=>{const t=g.currentRoute.value.params.id;console.log(t);try{const{data:e}=await axios.get(`/api/web/get-day/${t}`);i.value=e,c.value.commands.setContent(e.description),r.value=e.equipment.map(a=>a.id),u.value=e.warmups.map(a=>a.id),d.value=e.workouts.map(a=>a.id)}catch(e){console.error(e)}};return C(async()=>{await V(),await b(),await x(),await U()}),(t,e)=>(N(),T("div",null,[y(" Editting a day "),B,o(W,{modelValue:i.value.title,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value.title=a),"hide-details":"","single-line":"",rules:[a=>!!a||"Name is required"]},null,8,["modelValue","rules"]),L,o(h(E),{editor:h(c)},null,8,["editor"]),O,s("img",{style:{width:"80px",height:"80px","object-fit":"contain"},src:_(i.value.image)},null,8,J),o($,null,{default:n(()=>[o(m,{cols:"4"},{default:n(()=>[R,o(p,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value=a),items:v.value,"item-value":"id",multiple:"",chips:""},null,8,["modelValue","items"])]),_:1}),o(m,{cols:"4"},{default:n(()=>[j,o(p,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=a=>u.value=a),items:w.value,multiple:"","item-value":"id",chips:""},null,8,["modelValue","items"])]),_:1}),o(m,{cols:"4"},{default:n(()=>[F,o(p,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=a=>d.value=a),items:f.value,multiple:"","item-value":"id",chips:""},null,8,["modelValue","items"])]),_:1})]),_:1}),o(D,{class:"mt-10",color:"lorevera",onClick:q},{default:n(()=>[y("Save Changes")]),_:1})]))}};export{K as default};
