import{a as q,c as I,w as a,r as u,o as C,b as m,t as h,d as l,e as o,j as A,q as R,F as D}from"./app-DouUbhVd.js";import{U as N}from"./UploadImage-i_V0JoWh.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={components:{UploadImage:N},data(){return{error:"",valid:!1,validWarm:!1,dialogAddWarm:!1,dialogExersise:!1,activeWeek:void 0,valid:!1,url:"",rules:{required:i=>!!i||"Required Field"},activeWarm:{name:"",description:"",time:"",reps:"",image:"",time:""},activeEx:{name:"",description:"",time:"",reps:"",image:"",time:"",week:"",video:""},program:{name:"",image:"",description:"",items:"",warmup:[]},items:["Dumbbells","Dumbbells2","Dumbbells3","Dumbbells4"],headers:[{text:"Name",align:"start",value:"name"},{text:"Description",value:"description"},{text:"Time",value:"time"},{text:"Reps",value:"reps"}],listWeeks:[]}},created(){this.getItem()},methods:{groupBy(i,s){return i.reduce(function(f,W){return(f[W[s]]=f[W[s]]||[]).push(W),f},{})},createTables(){let i=this.groupBy(this.program.items,"weekId");for(const[s,f]of Object.entries(i))this.listWeeks.push(f)},getItem(){try{q.get("/programs/"+this.$route.params.id).then(({data:i})=>(this.program=i,this.createTables()))}catch{}},saveProgram(){if(this.$refs.form.validate())try{var i=new Headers;i.append("headers","multipart/form-data");let s=new FormData,f=[];this.listWeeks.forEach(t=>t.forEach(d=>f.push(d))),this.program.items=JSON.stringify(f),Object.keys(this.program).forEach(t=>{s.append(t,this.program[t])}),console.log(s),q.post("/programs/create",s,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>console.log("response CREATE PROGRAM",t))}catch(s){console.log(s)}else console.log("form error")},deleteWeek(i){this.listWeeks.splice(i,1)},dialogAddExersise(i){this.dialogExersise=!0,this.activeWeek=i},addWeek(){this.listWeeks.push([])},saveWarmRow(){if(this.activeWarm.description==""){this.$store.commit("SET_SNACKBAR",{show:!0,text:"Description is empty"});return}else if(this.$refs.formWarm.validate())try{let i={...this.activeWarm};this.program.warmup.push(i),this.resetWarmForm()}catch(i){console.log(i)}},saveRowEx(){if(this.activeEx.description==""){this.$store.commit("SET_SNACKBAR",{show:!0,text:"Description is empty"});return}else if(this.$refs.formEx.validate())try{this.activeEx.week=this.activeWeek;let i={...this.activeEx};this.listWeeks[this.activeWeek].push(i),this.resetExForm()}catch(i){console.log(i)}},resetWarmForm(){this.dialogAddWarm=!1,this.activeWarm.name="",this.activeWarm.description="",this.activeWarm.time="",this.activeWarm.image="",this.activeWarm.reps=""},resetExForm(){this.dialogExersise=!1,this.activeWeek=void 0,this.activeEx.name="",this.activeEx.description="",this.activeEx.time="",this.activeEx.image="",this.activeEx.reps="",this.activeEx.week="",this.activeEx.video=""},clearImg(){this.program.image="",this.url=""},clearImgWarm(){this.activeWarm.image=""},onFileChange(i){const s=i.target.files[0];this.url=URL.createObjectURL(s),this.program.image=s},onFileChangeWarm(){const i=e.target.files[0];this.activeWarm.image=i}}},B={class:"d-flex justify-content-between"},j=m("h4",null,"Name",-1),O=m("h4",null,"Featured Image",-1),P=m("h4",null,"Description",-1),L=m("h3",null,"Warm Up",-1),K=m("div",{class:"h-10"},null,-1),G=m("div",{class:"h-10"},null,-1),H={class:"pa-3"},J={class:"pa-3 m-2"},M={class:"pa-3 m-2"};function z(i,s,f,W,t,d){const c=u("v-btn"),p=u("v-text-field"),V=u("upload-image"),n=u("v-col"),v=u("v-row"),k=u("wysiwyg"),g=u("v-icon"),w=u("v-data-table"),E=u("v-form"),y=u("v-flex"),b=u("v-card"),U=u("v-dialog"),F=u("v-main");return C(),I(F,null,{default:a(()=>[m("div",B,[m("h3",null,"Editing Program "+h(t.program.name),1),l(c,{onClick:d.saveProgram,color:"primary"},{default:a(()=>[o(" Save ")]),_:1},8,["onClick"])]),l(E,{ref:"form",id:"create-form",modelValue:t.valid,"onUpdate:modelValue":s[3]||(s[3]=r=>t.valid=r)},{default:a(()=>[j,l(p,{modelValue:t.program.name,"onUpdate:modelValue":s[0]||(s[0]=r=>t.program.name=r),rules:[t.rules.required],class:"field",required:"",flat:""},null,8,["modelValue","rules"]),l(v,null,{default:a(()=>[l(n,{class:"cols-6"},{default:a(()=>[O,l(V,{onCleanImg:d.clearImg,onChanged:d.onFileChange,max:1},null,8,["onCleanImg","onChanged"])]),_:1})]),_:1}),l(v,null,{default:a(()=>[l(n,{class:"cols-12"},{default:a(()=>[P,l(k,{modelValue:t.program.description,"onUpdate:modelValue":s[1]||(s[1]=r=>t.program.description=r)},null,8,["modelValue"])]),_:1})]),_:1}),l(v,null,{default:a(()=>[l(n,{class:"cols-9"},{default:a(()=>[L]),_:1}),l(n,{class:"cols-3"},{default:a(()=>[l(c,{color:"primary",onClick:s[2]||(s[2]=r=>t.dialogAddWarm=!0)},{default:a(()=>[o(" Add Warm Up "),l(g,null,{default:a(()=>[o(" mdi-pencil ")]),_:1})]),_:1})]),_:1})]),_:1}),l(w,{headers:t.headers,"no-data-text":"Add exercises",items:t.program.warmup,"hide-default-footer":"",class:"elevation-1"},null,8,["headers","items"]),(C(!0),A(D,null,R(t.listWeeks,(r,x)=>(C(),A("div",{key:x},[K,l(v,null,{default:a(()=>[l(n,{cols:"8",class:""},{default:a(()=>[m("h3",null,"Week "+h(x+1),1)]),_:2},1024),l(n,{cols:"4",class:"flex"},{default:a(()=>[l(c,{color:"primary",onClick:_=>d.dialogAddExersise(x)},{default:a(()=>[o(" Add Exercise "),l(g,null,{default:a(()=>[o(" mdi-pencil ")]),_:1})]),_:2},1032,["onClick"]),l(c,{color:"error",onClick:_=>d.deleteWeek(x)},{default:a(()=>[o(" Delete Week "),l(g,null,{default:a(()=>[o(" mdi-pencil ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),l(w,{headers:t.headers,"no-data-text":"Add exercises",items:t.listWeeks[x],"hide-default-footer":"",class:"elevation-1"},{item:a(_=>[m("tr",null,[m("td",null,h(_.item.name),1),m("td",null,h(_.item.description),1),m("td",null,h(_.item.time),1),m("td",null,h(_.item.reps),1),m("td",null,[l(c,{color:"orange",fab:"",small:"",dark:""},{default:a(()=>[l(g,null,{default:a(()=>[o("mdi-pencil")]),_:1})]),_:1}),l(c,{color:"red",fab:"",small:"",dark:""},{default:a(()=>[l(g,null,{default:a(()=>[o("mdi-delete")]),_:1})]),_:1})])])]),_:2},1032,["headers","items"])]))),128)),G,l(c,{color:"primary",onClick:d.addWeek},{default:a(()=>[o(" Add Week "),l(g,null,{default:a(()=>[o(" mdi-pencil ")]),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue"]),l(U,{modelValue:t.dialogAddWarm,"onUpdate:modelValue":s[9]||(s[9]=r=>t.dialogAddWarm=r),persistent:"",width:"700",id:"bg-white"},{default:a(()=>[l(b,null,{default:a(()=>[l(E,{ref:"formWarm",modelValue:t.validWarm,"onUpdate:modelValue":s[8]||(s[8]=r=>t.validWarm=r)},{default:a(()=>[l(y,null,{default:a(()=>[l(n,{class:"cols-6"},{default:a(()=>[o(" Name "),l(p,{modelValue:t.activeWarm.name,"onUpdate:modelValue":s[4]||(s[4]=r=>t.activeWarm.name=r),rules:[t.rules.required],class:"field",required:"",flat:""},null,8,["modelValue","rules"])]),_:1}),l(n,{class:"cols-6"},{default:a(()=>[o(" Description "),l(k,{modelValue:t.activeWarm.description,"onUpdate:modelValue":s[5]||(s[5]=r=>t.activeWarm.description=r)},null,8,["modelValue"])]),_:1}),l(v,{class:"pa-3"},{default:a(()=>[l(n,{class:"cols-6"},{default:a(()=>[o(" Reps "),l(p,{modelValue:t.activeWarm.reps,"onUpdate:modelValue":s[6]||(s[6]=r=>t.activeWarm.reps=r),rules:[t.rules.required],class:"field",type:"number",required:"",flat:""},null,8,["modelValue","rules"])]),_:1}),l(n,{class:"cols-6"},{default:a(()=>[o(" Time "),l(p,{modelValue:t.activeWarm.time,"onUpdate:modelValue":s[7]||(s[7]=r=>t.activeWarm.time=r),rules:[t.rules.required],class:"field",type:"number",required:"",flat:""},null,8,["modelValue","rules"])]),_:1})]),_:1}),m("div",H,[l(V,{onCleanImg:d.clearImgWarm,onChanged:d.onFileChangeWarm,max:1},null,8,["onCleanImg","onChanged"])])]),_:1}),m("div",J,[l(c,{onClick:d.resetWarmForm},{default:a(()=>[o(" Close ")]),_:1},8,["onClick"]),l(c,{onClick:d.saveWarmRow,color:"primary"},{default:a(()=>[o(" Save ")]),_:1},8,["onClick"])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),l(U,{modelValue:t.dialogExersise,"onUpdate:modelValue":s[16]||(s[16]=r=>t.dialogExersise=r),persistent:"",width:"700",id:"bg-white"},{default:a(()=>[l(b,null,{default:a(()=>[l(E,{ref:"formEx",modelValue:t.validWarm,"onUpdate:modelValue":s[15]||(s[15]=r=>t.validWarm=r)},{default:a(()=>[l(y,null,{default:a(()=>[l(n,{class:"cols-6"},{default:a(()=>[o(" Name "),l(p,{modelValue:t.activeEx.name,"onUpdate:modelValue":s[10]||(s[10]=r=>t.activeEx.name=r),rules:[t.rules.required],class:"field",required:"",flat:""},null,8,["modelValue","rules"])]),_:1}),l(n,{class:"cols-6"},{default:a(()=>[o(" Description "),l(k,{modelValue:t.activeEx.description,"onUpdate:modelValue":s[11]||(s[11]=r=>t.activeEx.description=r)},null,8,["modelValue"])]),_:1}),l(v,{class:"pa-3"},{default:a(()=>[l(n,{class:"cols-6"},{default:a(()=>[o(" Reps "),l(p,{modelValue:t.activeEx.reps,"onUpdate:modelValue":s[12]||(s[12]=r=>t.activeEx.reps=r),rules:[t.rules.required],class:"field",type:"number",required:"",flat:""},null,8,["modelValue","rules"])]),_:1}),l(n,{class:"cols-6"},{default:a(()=>[o(" Time "),l(p,{modelValue:t.activeEx.time,"onUpdate:modelValue":s[13]||(s[13]=r=>t.activeEx.time=r),rules:[t.rules.required],class:"field",type:"number",required:"",flat:""},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(v,{class:"pa-3"},{default:a(()=>[l(n,{cols:"cols-6"},{default:a(()=>[o(" Featured Image "),l(V,{onCleanImg:d.clearImgWarm,onChanged:d.onFileChangeWarm,max:1},null,8,["onCleanImg","onChanged"])]),_:1}),l(n,{cols:"cols-6"},{default:a(()=>[o(" Video "),l(p,{modelValue:t.activeEx.video,"onUpdate:modelValue":s[14]||(s[14]=r=>t.activeEx.video=r),class:"field",required:"",flat:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),m("div",M,[l(c,{onClick:d.resetExForm},{default:a(()=>[o(" Close ")]),_:1},8,["onClick"]),l(c,{onClick:d.saveRowEx,color:"primary"},{default:a(()=>[o(" Save ")]),_:1},8,["onClick"])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}const Z=T(S,[["render",z]]);export{Z as default};
