import{a as M,c as P,w as l,r as d,o as f,b as i,t as h,d as t,j as k,e as n,m as T,p as q}from"./app-DouUbhVd.js";import{U as B}from"./UploadImage-i_V0JoWh.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={components:{UploadImage:B},data:()=>({dialog:!1,dialogDelete:!1,plan:{name:"",items:[{id:1,name:"hi",photo:"Si"}]},rules:{required:e=>!!e||"Required Field."},headers:[{text:"Meal Name",align:"start",sortable:!1,value:"name"},{text:"Calories",value:"calories"},{text:"Fat (g)",value:"fat"},{text:"Carbs (g)",value:"carbs"},{text:"Protein (g)",value:"protein"},{text:"Actions",value:"actions",sortable:!1}],desserts:[{name:"Frozen Yogurt",calories:159,fat:6,carbs:24,protein:4,instructions:"hi",ingredients:"aver"}],editedIndex:-1,editedItem:{name:"",calories:0,fat:0,carbs:0,protein:0},defaultItem:{name:"",calories:0,fat:0,carbs:0,protein:0}}),computed:{formTitle(){return this.editedIndex===-1?"New Meal":"Edit Meal"}},watch:{dialog(e){e||this.close()},dialogDelete(e){e||this.closeDelete()}},created(){this.getItem()},methods:{onFileChange(e){this.plan.photo=e[0]},clearImg(){this.plan.photo=null},getItem(){M.get("/nutrition/"+this.$route.params.id).then(e=>{this.plan=e.data})},editItem(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm(){this.desserts.splice(this.editedIndex,1),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){this.editedIndex>-1?Object.assign(this.desserts[this.editedIndex],this.editedItem):this.desserts.push(this.editedItem),this.close()}}},A=i("h4",null,"Name",-1),R=i("h4",null,"Image",-1),z={key:0},H=["src"],K={key:1},Y={class:"text-h5"},G=i("h4",{class:"mt-3"},"Ingredients",-1),J=i("h4",{class:"mt-3"},"Instructions",-1);function L(e,o,Q,W,X,s){const m=d("v-text-field"),p=d("v-icon"),w=d("upload-image"),r=d("v-col"),v=d("v-row"),x=d("v-toolbar-title"),y=d("v-divider"),c=d("v-spacer"),u=d("v-btn"),g=d("v-card-title"),I=d("wysiwyg"),U=d("v-container"),D=d("v-card-text"),b=d("v-card-actions"),V=d("v-card"),C=d("v-dialog"),N=d("v-toolbar"),O=d("v-data-table"),j=d("v-form"),F=d("v-main");return f(),P(F,null,{default:l(()=>[i("h3",null,"Editing Nutrition Plan: "+h(e.plan.name),1),A,t(j,null,{default:l(()=>[t(m,{modelValue:e.plan.name,"onUpdate:modelValue":o[0]||(o[0]=a=>e.plan.name=a),rules:[e.rules.required],class:"field",required:"",flat:""},null,8,["modelValue","rules"]),t(v,null,{default:l(()=>[t(r,{cols:"6"},{default:l(()=>[R,typeof e.plan.photo=="string"&&e.plan.photo.includes("aws")?(f(),k("div",z,[i("img",{src:e.plan.photo,width:"150",class:"mt-3"},null,8,H),t(p,{onClick:s.clearImg},{default:l(()=>[n(" mdi-window-close ")]),_:1},8,["onClick"])])):(f(),k("div",K,[t(w,{onCleanImg:s.clearImg,onChanged:s.onFileChange,max:1},null,8,["onCleanImg","onChanged"])]))]),_:1})]),_:1}),t(O,{headers:e.headers,items:e.desserts,"sort-by":"calories",class:"elevation-1 mt-5"},{top:l(()=>[t(N,{flat:""},{default:l(()=>[t(x,null,{default:l(()=>[n("Meals")]),_:1}),t(y,{class:"mx-4",inset:"",vertical:""}),t(c),t(C,{modelValue:e.dialog,"onUpdate:modelValue":o[8]||(o[8]=a=>e.dialog=a),width:"700px"},{activator:l(({on:a,attrs:_})=>[t(u,T({color:"primary",dark:"",class:"mb-2"},_,q(a)),{default:l(()=>[n(" New Item ")]),_:2},1040)]),default:l(()=>[t(V,null,{default:l(()=>[t(g,null,{default:l(()=>[i("span",Y,h(s.formTitle)+": "+h(e.editedItem.name),1)]),_:1}),t(D,null,{default:l(()=>[t(U,null,{default:l(()=>[t(v,null,{default:l(()=>[t(r,{cols:"12",sm:"6",md:"4"},{default:l(()=>[t(m,{modelValue:e.editedItem.name,"onUpdate:modelValue":o[1]||(o[1]=a=>e.editedItem.name=a),label:"Meal name"},null,8,["modelValue"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4"},{default:l(()=>[t(m,{modelValue:e.editedItem.calories,"onUpdate:modelValue":o[2]||(o[2]=a=>e.editedItem.calories=a),label:"Calories"},null,8,["modelValue"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4"},{default:l(()=>[t(m,{modelValue:e.editedItem.fat,"onUpdate:modelValue":o[3]||(o[3]=a=>e.editedItem.fat=a),label:"Fat (g)"},null,8,["modelValue"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4"},{default:l(()=>[t(m,{modelValue:e.editedItem.carbs,"onUpdate:modelValue":o[4]||(o[4]=a=>e.editedItem.carbs=a),label:"Carbs (g)"},null,8,["modelValue"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4"},{default:l(()=>[t(m,{modelValue:e.editedItem.protein,"onUpdate:modelValue":o[5]||(o[5]=a=>e.editedItem.protein=a),label:"Protein (g)"},null,8,["modelValue"])]),_:1})]),_:1}),G,t(I,{modelValue:e.editedItem.ingredients,"onUpdate:modelValue":o[6]||(o[6]=a=>e.editedItem.ingredients=a)},null,8,["modelValue"]),J,t(I,{modelValue:e.editedItem.instructions,"onUpdate:modelValue":o[7]||(o[7]=a=>e.editedItem.instructions=a)},null,8,["modelValue"])]),_:1})]),_:1}),t(b,null,{default:l(()=>[t(c),t(u,{color:"blue darken-1",text:"",onClick:s.close},{default:l(()=>[n(" Cancel ")]),_:1},8,["onClick"]),t(u,{color:"blue darken-1",text:"",onClick:s.save},{default:l(()=>[n(" Save ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(C,{modelValue:e.dialogDelete,"onUpdate:modelValue":o[9]||(o[9]=a=>e.dialogDelete=a),"max-width":"500px"},{default:l(()=>[t(V,null,{default:l(()=>[t(g,{class:"text-h5"},{default:l(()=>[n("Are you sure you want to delete this item?")]),_:1}),t(b,null,{default:l(()=>[t(c),t(u,{color:"blue darken-1",text:"",onClick:s.closeDelete},{default:l(()=>[n("Cancel")]),_:1},8,["onClick"]),t(u,{color:"blue darken-1",text:"",onClick:s.deleteItemConfirm},{default:l(()=>[n("OK")]),_:1},8,["onClick"]),t(c)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":l(({item:a})=>[t(p,{small:"",class:"mr-2",onClick:_=>s.editItem(a)},{default:l(()=>[n(" mdi-pencil ")]),_:2},1032,["onClick"]),t(p,{small:"",onClick:_=>s.deleteItem(a)},{default:l(()=>[n(" mdi-delete ")]),_:2},1032,["onClick"])]),"no-data":l(()=>[n(" No items ")]),_:1},8,["headers","items"])]),_:1})]),_:1})}const te=E(S,[["render",L]]);export{te as default};
