import{s as V,o as W,a as E,b as F,i as p,d as l,w as t,n as d,C as B,E as b,F as _,e as g,D as w,p as i,t as C,y,J as c,z as x,v as s,j as v,N as U,I,O as k}from"./app-B8AjFgFC.js";const P={flex:""},M=p("h2",null,"List Nutrition Meal Plan",-1),J={__name:"ListNutrition",setup(j){const $=V([{title:"id",value:"id"},{title:"Ingredients",value:"ingredients"},{title:"Goal",value:"Goal"},{title:"Actions",value:"actions",sortable:!1}]),r=V({dialog:!1,itemid:null}),u=V({dialog:!1,fat:null,protein:null,carbs:null,calories:null,ingredients:null,goal:null}),f=V(!1),o=V({}),m=V([]),L=n=>{console.log("edit item",n),f.value=!0,o.value=n},N=n=>{console.log("delete item",n),r.value.dialog=!0,r.value.itemid=n},S=async()=>{try{const{data:n}=await g.post(`/api/web/update-recipe/${o.value.id}`,{fat:o.value.fat,protein:o.value.protein,carbs:o.value.carbs,calories:o.value.calories,ingredients:o.value.ingredients,plan:"meat_plan",goal:o.value.goal=="Lose Weight"?"loss_weight":"gain_muscle"});m.value=m.value.map(e=>e.id===n.id?n:e)}catch(n){console.error(n)}f.value=!1},T=async()=>{try{const{data:n}=await g.post("/api/web/store-recipe",{fat:u.value.fat,protein:u.value.protein,carbs:u.value.carbs,calories:u.value.calories,ingredients:u.value.ingredients,plan:"meat_plan",goal:u.value.goal=="Lose Weight"?"loss_weight":"gain_muscle"});m.value.push(n),u.value.fat=null,u.value.protein=null,u.value.carbs=null,u.value.calories=null,u.value.ingredients=null,u.value.goal=null}catch(n){console.error(n)}u.value.dialog=!1},A=async()=>{const n=r.value.itemid;try{await g.delete(`/api/web/delete-recipe/${n}`),m.value=m.value.filter(e=>e.id!==n)}catch(e){console.error(e)}r.value.dialog=!1,r.value.itemid=null},D=async()=>{try{const{data:n}=await g.get("/api/web/list-recipes-meat");m.value=n}catch(n){console.error(n)}};return W(async()=>{await D()}),(n,e)=>(E(),F(_,null,[p("div",P,[M,l(w),l(d,{color:"primary",onClick:e[0]||(e[0]=a=>u.value.dialog=!0)},{default:t(()=>[i("Add")]),_:1})]),l(B,{headers:$.value,items:m.value,"items-per-page":100,class:"elevation-1 pt-5"},{item:t(a=>[p("tr",null,[p("td",null,C(a.item.id),1),p("td",null,C(a.item.ingredients),1),p("td",null,C(a.item.goal),1),p("td",null,[l(d,{color:"primary",text:"",onClick:G=>L(a.item)},{default:t(()=>[i(" Edit ")]),_:2},1032,["onClick"]),l(d,{color:"error",text:"",onClick:G=>N(a.item.id)},{default:t(()=>[i(" Delete ")]),_:2},1032,["onClick"])])])]),_:1},8,["headers","items"]),l(b,{modelValue:r.value.dialog,"onUpdate:modelValue":e[3]||(e[3]=a=>r.value.dialog=a),"max-width":"400",persistent:""},{default:t(()=>[l(y,{text:"Are you sure you want to delete this item?",title:"This will delete the item permanently."},{actions:t(()=>[l(w),l(d,{onClick:e[1]||(e[1]=a=>r.value.dialog=!1)},{default:t(()=>[i(" Cancel ")]),_:1}),l(d,{color:"lorevera",onClick:e[2]||(e[2]=a=>A())},{default:t(()=>[i(" Confirm ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(b,{modelValue:u.value.dialog,"onUpdate:modelValue":e[12]||(e[12]=a=>u.value.dialog=a),"max-width":"400",persistent:""},{default:t(()=>[l(y,null,{default:t(()=>[l(c,null,{default:t(()=>[i(" Add Item ")]),_:1}),l(x,null,{default:t(()=>[l(s,null,{default:t(()=>[l(v,{modelValue:u.value.fat,"onUpdate:modelValue":e[4]||(e[4]=a=>u.value.fat=a),label:"Fat",variant:"outlined",type:"number"},null,8,["modelValue"]),l(v,{modelValue:u.value.protein,"onUpdate:modelValue":e[5]||(e[5]=a=>u.value.protein=a),label:"Protein",variant:"outlined",type:"number"},null,8,["modelValue"])]),_:1}),l(s,null,{default:t(()=>[l(v,{modelValue:u.value.carbs,"onUpdate:modelValue":e[6]||(e[6]=a=>u.value.carbs=a),label:"Carbs",variant:"outlined",type:"number"},null,8,["modelValue"]),l(v,{modelValue:u.value.calories,"onUpdate:modelValue":e[7]||(e[7]=a=>u.value.calories=a),label:"Calories",variant:"outlined",type:"number"},null,8,["modelValue"])]),_:1}),l(s,null,{default:t(()=>[l(U,{label:"Ingredients",variant:"outlined",modelValue:u.value.ingredients,"onUpdate:modelValue":e[8]||(e[8]=a=>u.value.ingredients=a)},null,8,["modelValue"])]),_:1}),l(s,null,{default:t(()=>[l(I,{label:"Select Goal",variant:"outlined",modelValue:u.value.goal,"onUpdate:modelValue":e[9]||(e[9]=a=>u.value.goal=a),items:["Lose Weight","Gain Weight"]},null,8,["modelValue"])]),_:1})]),_:1}),l(k,null,{default:t(()=>[l(d,{onClick:e[10]||(e[10]=a=>u.value.dialog=!1)},{default:t(()=>[i("Cancel")]),_:1}),l(d,{onClick:e[11]||(e[11]=a=>T()),variant:"tonal",color:"lorevera"},{default:t(()=>[i("Save")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(b,{modelValue:f.value,"onUpdate:modelValue":e[21]||(e[21]=a=>f.value=a),"max-width":"400",persistent:""},{default:t(()=>[l(y,null,{default:t(()=>[l(c,null,{default:t(()=>[i(" Add Item ")]),_:1}),l(x,null,{default:t(()=>[l(s,null,{default:t(()=>[l(v,{modelValue:o.value.fat,"onUpdate:modelValue":e[13]||(e[13]=a=>o.value.fat=a),label:"Fat",variant:"outlined",type:"number"},null,8,["modelValue"]),l(v,{modelValue:o.value.protein,"onUpdate:modelValue":e[14]||(e[14]=a=>o.value.protein=a),label:"Protein",variant:"outlined",type:"number"},null,8,["modelValue"])]),_:1}),l(s,null,{default:t(()=>[l(v,{modelValue:o.value.carbs,"onUpdate:modelValue":e[15]||(e[15]=a=>o.value.carbs=a),label:"Carbs",variant:"outlined",type:"number"},null,8,["modelValue"]),l(v,{modelValue:o.value.calories,"onUpdate:modelValue":e[16]||(e[16]=a=>o.value.calories=a),label:"Calories",variant:"outlined",type:"number"},null,8,["modelValue"])]),_:1}),l(s,null,{default:t(()=>[l(U,{label:"Ingredients",variant:"outlined",modelValue:o.value.ingredients,"onUpdate:modelValue":e[17]||(e[17]=a=>o.value.ingredients=a)},null,8,["modelValue"])]),_:1}),l(s,null,{default:t(()=>[l(I,{label:"Select Goal",variant:"outlined",modelValue:o.value.goal,"onUpdate:modelValue":e[18]||(e[18]=a=>o.value.goal=a),items:["Lose Weight","Gain Weight"]},null,8,["modelValue"])]),_:1})]),_:1}),l(k,null,{default:t(()=>[l(d,{onClick:e[19]||(e[19]=a=>f.value=!1)},{default:t(()=>[i("Cancel")]),_:1}),l(d,{onClick:e[20]||(e[20]=a=>S()),variant:"tonal",color:"lorevera"},{default:t(()=>[i("Save")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{J as default};
