import{s as u,o as w,a as x,b as h,i,d as a,w as s,n,C as b,E as D,F as $,e as c,D as v,p as r,t as g,y as A,f as B}from"./app-B8AjFgFC.js";const N={flex:""},T=i("h2",null,"List Programs",-1),L={__name:"ListPrograms",setup(E){const m=B(),p=()=>{m.push({name:"packages-add"})},f=u([{title:"id",value:"id"},{title:"Name",align:"start",sortable:!1,value:"name"},{title:"Actions",value:"actions",sortable:!1}]),o=u({dialog:!1,itemid:null}),d=u([]),k=e=>{console.log(e),m.push({name:"packages-edit",params:{id:e.id}})},_=e=>{console.log("delete item",e),o.value.dialog=!0,o.value.itemid=e},y=async()=>{const e=o.value.itemid;try{await c.delete(`/api/web/delete-package/${e}`),d.value=d.value.filter(t=>t.id!==e)}catch(t){console.error(t)}o.value.dialog=!1,o.value.itemid=null},C=async()=>{try{const{data:e}=await c.get("/api/web/list-packages");d.value=e}catch(e){console.error(e)}};return w(async()=>{await C()}),(e,t)=>(x(),h($,null,[i("div",N,[T,a(v),a(n,{color:"primary",onClick:t[0]||(t[0]=l=>p())},{default:s(()=>[r("Add")]),_:1})]),a(b,{headers:f.value,items:d.value,"items-per-page":100,class:"elevation-1 pt-5"},{item:s(l=>[i("tr",null,[i("td",null,g(l.item.id),1),i("td",null,g(l.item.package_name),1),i("td",null,[a(n,{color:"primary",text:"",onClick:V=>k(l.item)},{default:s(()=>[r(" Edit ")]),_:2},1032,["onClick"]),a(n,{color:"error",text:"",onClick:V=>_(l.item.id)},{default:s(()=>[r(" Delete ")]),_:2},1032,["onClick"])])])]),_:1},8,["headers","items"]),a(D,{modelValue:o.value.dialog,"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.dialog=l),"max-width":"400",persistent:""},{default:s(()=>[a(A,{text:"Are you sure you want to delete this item?",title:"This will delete the item permanently."},{actions:s(()=>[a(v),a(n,{onClick:t[1]||(t[1]=l=>o.value.dialog=!1)},{default:s(()=>[r(" Cancel ")]),_:1}),a(n,{color:"lorevera",onClick:t[2]||(t[2]=l=>y())},{default:s(()=>[r(" Confirm ")]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{L as default};
